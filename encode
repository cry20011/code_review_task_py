import argparse
import textfuncs


alph = "abcdefghijklmnopqrstuvwxyz"

	
def chiper_caesar(text, key):
    key = int(key)
    chiper = ""
    for c in text:
        chiper += alph[(alph.index(c) + key) % len(alph)]

    return chiper

def chiper_vigenere(text, key):
    chiper = ""
    for i in range(len(text)):
        key_pos = i % len(key)
        chiper += alph[(alph.index(text[i]) + alph.index(key[key_pos])) % len(alph)]

    return chiper



parser = argparse.ArgumentParser()

parser.add_argument("--chiper")
parser.add_argument("--key")
parser.add_argument("--input-file")
parser.add_argument("--output-file")
args = parser.parse_args()


text = textfuncs.input_text(args.input_file)
text = textfuncs.tolower_onlyletters(text)	

if args.chiper == "caesar":
    chiper = chiper_caesar(text, args.key)
elif args.chiper == "vigenere":
    chiper = chiper_vigenere(text, args.key)

textfuncs.print_text(chiper, args.output_file)
